(()=>{"use strict";chrome.runtime.onInstalled.addListener((function(){chrome.contextMenus.create({id:"saveSnippet",title:"Save snippet",contexts:["selection"]})})),chrome.contextMenus.onClicked.addListener((function(e,t){e.selectionText&&t&&"saveSnippet"===e.menuItemId&&function(e,t){chrome.storage.local.get({snippets:{}},(function(n){var s,i=n.snippets;t.url&&(i[t.url]||(i[t.url]={urlTitle:null!==(s=t.title)&&void 0!==s?s:t.url,snippets:[]}),i[t.url].snippets.push({text:e,timestamp:(new Date).toLocaleString()}),chrome.storage.local.set({snippets:i},(function(){console.log("Snippet saved:",t,t.url,t.title)})))}))}(e.selectionText,t)}))})();